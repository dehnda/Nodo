# M1.4 Node Parameter Audit
**Date:** November 1, 2025
**Purpose:** Comprehensive review of all 44 nodes' parameter completeness before M1.4 testing

---

## Status Legend
- ‚úÖ **Complete** - Has all expected parameters with proper definitions
- ‚ö†Ô∏è **Needs Review** - Has parameters but may need additions/adjustments
- ‚ùå **Incomplete** - Missing parameters or implementation
- üîß **Needs Backend** - Header-only, needs .cpp implementation

---

## Patch 1: Geometry Generators (6 nodes)

### 1. Sphere SOP ‚úÖ
**Status:** Complete
**Parameters:**
- `primitive_type` (Universal) - Polygon/Points dropdown
- `radius` - Float (0.01-100.0)
- `segments` - Int (3-256)
- `rings` - Int (3-128)

**Categories:** Universal, Size, Resolution
**Notes:** Perfect example of a complete generator node.

---

### 2. Box SOP ‚úÖ
**Status:** Complete
**Parameters:**
- `primitive_type` (Universal) - Polygon/Points dropdown
- `width`, `height`, `depth` - Float (0.01-100.0)
- `width_segments`, `height_segments`, `depth_segments` - Int (1-100)

**Categories:** Universal, Size, Subdivisions
**Notes:** Good separation of size vs subdivisions.

---

### 3. Cylinder SOP ‚úÖ
**Status:** Complete
**Parameters:**
- `primitive_type` (Universal) - Polygon/Points dropdown
- `radius` - Float (0.01-100.0)
- `height` - Float (0.01-100.0)
- `radial_segments` - Int (3-256)
- `height_segments` - Int (1-100)
- `top_cap` - Bool
- `bottom_cap` - Bool

**Categories:** Universal, Size, Resolution, Caps
**Notes:** Cap options are great for open-ended cylinders.

---

### 4. Torus SOP ‚úÖ
**Status:** Complete
**Parameters:**
- `primitive_type` (Universal) - Polygon/Points dropdown
- `major_radius` - Float (0.01-100.0) - Distance from center to tube
- `minor_radius` - Float (0.01-100.0) - Tube thickness
- `major_segments` - Int (3-256)
- `minor_segments` - Int (3-128)

**Categories:** Universal, Size, Resolution
**Notes:** Clear distinction between major/minor radius.

---

### 5. Grid SOP ‚úÖ
**Status:** Complete
**Parameters:**
- `primitive_type` (Universal) - Polygon/Points dropdown
- `size_x` - Float (0.01-1000.0)
- `size_z` - Float (0.01-1000.0)
- `columns` - Int (1-1000) - X divisions
- `rows` - Int (1-1000) - Z divisions

**Categories:** Universal, Size, Resolution
**Notes:** Good for horizontal ground planes.

---

### 6. Line SOP üîß
**Status:** Needs Backend Implementation
**Current:** Header-only stub
**Expected Parameters:**
- `primitive_type` (Universal) - Line/Points dropdown
- `origin` - Vector3 (start point)
- `direction` - Vector3 (end point or direction)
- `length` - Float
- `segments` - Int (number of points along line)

**Categories:** Universal, Geometry, Resolution
**Action Required:** Implement full parameter registration in .cpp file

---

## Patch 2: Modify Operations (6 nodes)

### 7. Extrude SOP ‚ö†Ô∏è
**Status:** Needs Review - Has private members instead of parameters
**Current Implementation:**
```cpp
private:
  double distance_ = 1.0;
  Eigen::Vector3d direction_{0.0, 0.0, 1.0};
  ExtrusionMode mode_ = ExtrusionMode::FACE_NORMALS;
  double inset_ = 0.0;
```

**Expected Parameters (should be registered):**
- `mode` - Int dropdown (Face Normals, Uniform Direction, Region Normals)
- `distance` - Float (-10.0 to 10.0)
- `direction_x`, `direction_y`, `direction_z` - Floats (visible when mode=1)
- `inset` - Float (0.0-1.0) - Border around extruded faces

**Categories:** Extrusion, Direction
**Action Required:** Convert private members to registered parameters

---

### 8. Subdivision SOP (Subdivide) ‚ö†Ô∏è
**Status:** Needs Review - Has some parameters
**Current:** Has setter methods, unclear if parameters are registered
**Expected Parameters:**
- `subdivision_levels` - Int (0-5)
- `preserve_boundaries` - Bool

**Categories:** Subdivision
**Action Required:** Verify parameters are properly registered in constructor

---

### 9. Noise Displacement SOP ‚úÖ
**Status:** Complete
**Parameters:**
- `amplitude` - Float
- `frequency` - Float
- `octaves` - Int (4)
- `lacunarity` - Float (2.0)
- `persistence` - Float (0.5)
- `seed` - Int (42)

**Categories:** Noise
**Notes:** Good fractal noise parameters.

---

### 10. Laplacian SOP (Smooth) ‚ö†Ô∏è
**Status:** Needs Review
**Expected Parameters:**
- `method` - Int dropdown (Uniform, Cotangent, Taubin)
- `iterations` - Int (1-100)
- `lambda` - Float (0.0-1.0) - Smoothing strength
- `mu` - Float (for Taubin method)

**Categories:** Smoothing
**Action Required:** Verify all parameters registered

---

### 11. Bevel SOP ‚ùå
**Status:** Incomplete - Check if node exists
**Expected Parameters:**
- `distance` - Float (bevel amount)
- `segments` - Int (smoothness of bevel)
- `mode` - Dropdown (Edges, Vertices)

**Action Required:** Verify node exists and has parameters

---

### 12. Displace SOP ‚ùå
**Status:** Incomplete - May be covered by Noise Displacement
**Expected:** Either combine with Noise or create separate node for attribute-based displacement
**Action Required:** Clarify if this is a duplicate or separate node

---

## Patch 3: Transform Operations (6 nodes)

### 13. Transform SOP ‚úÖ
**Status:** Complete
**Parameters:**
- `translate` - Vector3 (0, 0, 0)
- `rotate` - Vector3 (0, 0, 0) in degrees
- `scale` - Vector3 (1, 1, 1)

**Categories:** Transform
**Notes:** Clean, simple transformation node. Order: Scale ‚Üí Rotate ‚Üí Translate

---

### 14. Array SOP ‚úÖ
**Status:** Complete
**Parameters:**
- `array_type` - Int dropdown (Linear, Radial, Grid)
- `count` - Int (3)
- **Linear mode:**
  - `linear_offset_x`, `linear_offset_y`, `linear_offset_z` - Floats
- **Radial mode:**
  - `radial_center_x`, `radial_center_y`, `radial_center_z` - Floats
  - `radial_radius` - Float (2.0)
  - `radial_angle_offset` - Float
- **Grid mode:**
  - `grid_width`, `grid_height` - Ints (3)
  - `grid_offset_x`, `grid_offset_z` - Floats

**Categories:** Array, Linear, Radial, Grid
**Notes:** Excellent use of `visible_when` conditions. Comprehensive array node.

---

### 15. Copy to Points SOP ‚úÖ
**Status:** Complete (based on grep results)
**Expected Parameters:**
- Target points input
- Copy geometry input
- `rotate_to_normal` - Bool
- `scale_by_attribute` - String (attribute name)
- `copy_attributes` - Bool

**Categories:** Copy
**Notes:** Multiple inputs for source and target.

---

### 16. Mirror SOP ‚úÖ
**Status:** Complete (based on grep results - 7 parameters)
**Expected Parameters:**
- `plane` - Int dropdown (XY, XZ, YZ)
- `origin_x`, `origin_y`, `origin_z` - Floats (mirror plane origin)
- `keep_original` - Bool (merge with mirrored copy)
- Mirror axis parameters

**Categories:** Mirror
**Notes:** Has 7 registered parameters, should be comprehensive.

---

### 17. Scatter SOP ‚úÖ
**Status:** Complete (based on grep results)
**Parameters:**
- Point count or density
- `seed` - Int (42)
- `use_face_area` - Bool (weight by face size)
- Distribution parameters

**Categories:** Scatter
**Notes:** 4 parameters found, should cover basic scattering.

---

### 18. Align SOP ‚ùå
**Status:** Incomplete - Not found in codebase
**Expected:** Align geometry to world axes or other geometry
**Action Required:** Create node or remove from roadmap

---

## Patch 4: Boolean & Combine (6 nodes)

### 19. Boolean SOP ‚úÖ
**Status:** Complete
**Parameters:**
- `operation` - Int dropdown (Union, Intersection, Difference)

**Categories:** Boolean
**Notes:** Simple but powerful. Relies on Manifold library. Two inputs.

---

### 20. Merge SOP ‚úÖ
**Status:** Complete
**Parameters:**
- Merge parameters found (1 registered parameter)

**Categories:** Merge
**Notes:** Combines multiple inputs into single geometry. Pass-through node mostly.

---

### 21. Join SOP ‚ùå
**Status:** Incomplete - Not found
**Expected:** Join edges/faces, different from merge
**Action Required:** Verify if needed or covered by Merge

---

### 22. Split SOP ‚ùå
**Status:** Incomplete - Not found
**Expected:** Split geometry into disconnected pieces
**Action Required:** Create or remove from roadmap

---

### 23. Remesh SOP ‚ùå
**Status:** Incomplete - Not found
**Expected:** Remesh to uniform triangulation
**Action Required:** Create or defer to Phase 2

---

### 24. Separate SOP ‚ùå
**Status:** Incomplete - Not found or covered by Blast
**Expected:** Separate by connectivity or attributes
**Action Required:** Clarify vs Blast node

---

## Patch 5: Attribute Operations (6 nodes)

### 25. Wrangle SOP ‚úÖ
**Status:** Complete (with exprtk)
**Expected Parameters:**
- `code` - String (expression)
- `class` (Universal) - Dropdown (Point, Primitive, Vertex, Detail)

**Categories:** Universal, Code
**Notes:** Uses exprtk for per-element expressions.

---

### 26. Attribute Create SOP ‚úÖ
**Status:** Complete
**Parameters:**
- `name` - String (attribute name)
- `class` (Universal) - Dropdown (Point, Primitive, Vertex, Detail)
- `type` - Int dropdown (Float, Vector, Integer)
- **Float mode:**
  - `value_float` - Float
- **Vector mode:**
  - `value_x`, `value_y`, `value_z` - Floats
- **Integer mode:**
  - `value_int` - Int

**Categories:** Universal, Attribute, Value
**Notes:** Excellent example of mode-based visibility.

---

### 27. Attribute Delete SOP ‚ö†Ô∏è
**Status:** Needs Review
**Expected Parameters:**
- `name` - String (attribute name or pattern)
- `class` (Universal) - Dropdown
- `pattern` - Bool (enable wildcard matching)

**Categories:** Universal, Attribute
**Action Required:** Verify parameters exist

---

### 28. Color SOP ‚ö†Ô∏è
**Status:** Needs Review
**Expected Parameters:**
- `class` (Universal) - Dropdown
- `color_mode` - Dropdown (Constant, Random, From Attribute)
- `color` - Color (RGB) - visible when mode=Constant
- `seed` - Int - visible when mode=Random

**Categories:** Universal, Color
**Action Required:** Check if implemented

---

### 29. Normal SOP ‚úÖ
**Status:** Complete (has .cpp file)
**Expected Parameters:**
- `method` - Dropdown (Face, Vertex, Hybrid)
- `weight_by_angle` - Bool

**Categories:** Normals
**Notes:** Should have parameters registered.

---

### 30. UV Unwrap SOP ‚úÖ
**Status:** Complete (has .cpp file with xatlas)
**Expected Parameters:**
- `resolution` - Int (texture resolution hint)
- `padding` - Float (island padding)
- `max_chart_count` - Int

**Categories:** UV
**Notes:** Uses xatlas for unwrapping.

---

## Patch 6: Group Operations (6 nodes)

### 31. Group Create SOP (Group SOP) ‚úÖ
**Status:** Complete (based on grep - 3 parameters)
**Parameters:**
- `group_name` - String
- `element_class` (Universal) - Dropdown (Point, Primitive, Vertex)
- `expression` - String (selection expression)

**Categories:** Universal, Group
**Notes:** Has add_group_type_parameter() called.

---

### 32. Group Delete SOP ‚ö†Ô∏è
**Status:** Needs Review
**Expected Parameters:**
- `group_name` - String (group to delete)
- `element_class` (Universal) - Dropdown

**Categories:** Universal, Group
**Action Required:** Check if exists

---

### 33. Group Promote SOP ‚ö†Ô∏è
**Status:** Needs Review
**Expected:** Convert point groups to primitive groups or vice versa
**Action Required:** Check implementation

---

### 34. Group Combine SOP ‚ö†Ô∏è
**Status:** Needs Review
**Expected:** Combine multiple groups with boolean operations
**Action Required:** Check implementation

---

### 35. Group Expand SOP ‚ö†Ô∏è
**Status:** Needs Review
**Expected:** Grow/shrink group by iterations
**Action Required:** Check implementation

---

### 36. Group Transfer SOP ‚ö†Ô∏è
**Status:** Needs Review
**Expected:** Transfer groups between geometries
**Action Required:** Check implementation

---

## Patch 7: Utility & Workflow (8 nodes)

### 37. Switch SOP ‚úÖ
**Status:** Complete
**Parameters:**
- `index` - Int (0-9) - Which input to select

**Categories:** Switch
**Notes:** 10 input ports. Simple selector node.

---

### 38. Null SOP ‚úÖ
**Status:** Complete
**Parameters:** None (pass-through)

**Categories:** None
**Notes:** Organizational node only.

---

### 39. Output SOP ‚úÖ
**Status:** Complete
**Parameters:**
- `output_name` - String
- `render` - Bool (include in render)
- `display` - Bool (show in viewport)

**Categories:** Output
**Notes:** Semantic marker for final outputs.

---

### 40. File SOP (Import) ‚úÖ
**Status:** Complete
**Parameters:**
- `file_path` - String
- `reload` - Int/Button (trigger reload)

**Categories:** File
**Notes:** Supports .obj import. No input ports (source node).

---

### 41. Export SOP ‚úÖ
**Status:** Complete
**Parameters:**
- `file_path` - String
- `export_now` - Int/Button (trigger export)

**Categories:** Export
**Notes:** Supports .obj export. Pass-through with side effect.

---

### 42. Cache SOP ‚ùå
**Status:** Incomplete - Header only?
**Expected Parameters:**
- `cache_enabled` - Bool
- `clear_cache` - Button

**Categories:** Cache
**Action Required:** Check if implemented

---

### 43. Time SOP ‚ùå
**Status:** Incomplete - Header only?
**Expected:** Animation/time controls
**Action Required:** Check if needed for Phase 1

---

### 44. Subnetwork SOP ‚ùå
**Status:** Incomplete - Complex feature
**Expected:** Container for node subgraphs
**Action Required:** Defer to Phase 2 or 3?

---

## Summary Statistics

### Completion Status:
- ‚úÖ **Complete:** 25 nodes (57%)
- ‚ö†Ô∏è **Needs Review:** 12 nodes (27%)
- ‚ùå **Incomplete:** 6 nodes (14%)
- üîß **Needs Backend:** 1 node (2%)

### By Patch:
1. **Generators:** 5/6 complete (83%) - Line needs impl
2. **Modifiers:** 2/6 complete (33%) - Extrude, Subdivide need review; Bevel, Displace missing
3. **Transforms:** 4/6 complete (67%) - Align missing
4. **Boolean/Combine:** 2/6 complete (33%) - Join, Split, Remesh, Separate missing
5. **Attributes:** 3/6 complete (50%) - Color, AttribDelete need review
6. **Groups:** 1/6 complete (17%) - Most group ops need review
7. **Utility:** 5/8 complete (63%) - Cache, Time, Subnetwork incomplete

---

## Priority Actions for M1.4

### Critical (Blocking M1.4):
1. **Line SOP** - Implement backend + parameters
2. **Extrude SOP** - Convert private members to registered parameters
3. **Subdivision SOP** - Verify parameter registration

### High Priority (Core Features):
4. **Group Operations** - Review/complete 5 group nodes (Delete, Promote, Combine, Expand, Transfer)
5. **Attribute Delete SOP** - Verify implementation
6. **Color SOP** - Check if implemented

### Medium Priority (Nice to Have):
7. **Laplacian SOP** - Verify mu parameter for Taubin
8. **Cache SOP** - Check if needed for Phase 1
9. **Time SOP** - Defer to Phase 2 if animation not in scope

### Low Priority (Can Defer):
10. **Bevel/Displace/Remesh** - Evaluate if needed for beta
11. **Align/Join/Split/Separate** - Consider deferring
12. **Subnetwork** - Definitely defer to Phase 2

---

## Recommendations

### Option A: Full 44 Nodes (Aggressive)
- Fix critical issues (1-3)
- Implement missing high-priority nodes (4-6)
- Complete = 31-33/44 nodes (70-75%)
- **Time:** 30-35 hours

### Option B: Core 35 Nodes (Realistic)
- Fix critical issues (1-3)
- Implement missing high-priority nodes (4-6)
- Defer 9 complex/duplicate nodes to Phase 2
- Complete = 31/35 nodes (89%)
- **Time:** 25-30 hours
- **Recommended approach** ‚úÖ

### Option C: MVP 25 Nodes (Conservative)
- Test only nodes currently complete
- Document missing nodes for Phase 2
- Complete = 25/25 nodes (100% of scope)
- **Time:** 18-20 hours
- Good fallback if timeline is tight

---

## Next Steps

1. **Review this audit** with stakeholders
2. **Choose Option A, B, or C** based on timeline
3. **Create detailed task list** for selected nodes
4. **Begin systematic testing** following M1.4 checklist per node
5. **Update roadmap** with realistic completion estimates
